<modal #modal>
    <modal-header>
        <h4 class="modal-title">{{"modal.transcription.send.header" | translate}}</h4>
    </modal-header>
    <modal-body>
        {{"modal.transcription.send.text" | translate}}
    </modal-body>
    <modal-footer>
        <button type="button" class="btn btn-primary" (click)="modal.dismiss()">{{"general.abort" | translate}}</button>
        <button type="button" class="btn btn-default" (click)="onSendNowClick()">{{"general.send now" | translate}}</button>
    </modal-footer>
</modal>

<modal #modal2>
    <modal-header>
        <h4 class="modal-title">{{"modal.transcription.sending.header" | translate}}</h4>
    </modal-header>
    <modal-body>
        {{"modal.transcription.sending.text" | translate}}<br/><br/>
        <div style="color:red">{{send_error}}</div>
    </modal-body>
</modal>

<div id="transcr-submit" class="panel panel-default">
    <h3>{{"transcription.check" | translate}}</h3>
    <p>
        {{"transcription-submit.overview" | translate}}
    </p>
    <app-transcr-overview [visible]="true" [show_transcriptiontable]="false" [segments]="transcrService.segments.segments"></app-transcr-overview>
    <br><br>
    <div *ngIf="!sessService.offline">
        <h3>Feedback</h3>
        <p>
            {{"transcription-submit.form fill out" | translate}}:
        </p>
        <section>
            <form (ngSubmit)="onSubmit(fo)" #fo="ngForm">
                <fieldset>
                    <div class="form-group">
                        <label class="control-label">{{"transcription-submit.intelligibility of the speaker" | translate}}:</label>
                        <div class="row">
                            <div class="col-xs-3">
                                <div class="radio">
                                    <label>{{"feedback.unintelligible" | translate}}
                                        <input type="radio" [(ngModel)]="feedback_data.quality_speaker"
                                               name="quality_speaker" value="unverstaendlich" required/></label>
                                </div>
                            </div>
                            <div class="col-xs-3">
                                <div class="radio">
                                    <label>{{"feedback.less intelligible" | translate}}
                                        <input type="radio" [(ngModel)]="feedback_data.quality_speaker"
                                               name="quality_speaker" value="weniger verstaendlich" required/></label>
                                </div>
                            </div>
                            <div class="col-xs-3">
                                <div class="radio">
                                    <label>{{"feedback.intelligible" | translate}}
                                        <input type="radio" [(ngModel)]="feedback_data.quality_speaker"
                                               name="quality_speaker" value="verstaendlich" required/></label>
                                </div>
                            </div>
                            <div class="col-xs-3">
                                <div class="radio">
                                    <label>{{"feedback.very good intelligible" | translate}}
                                        <input type="radio" [(ngModel)]="feedback_data.quality_speaker"
                                               name="quality_speaker" value="klar" required/></label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group"><label class="control-label">{{"feedback.quality of signal" | translate}}:</label>
                        <div class="row">
                            <div class="col-xs-3">
                                <div class="radio">
                                    <label>{{"feedback.a lot of noises" | translate}}
                                        <input type="radio" [(ngModel)]="feedback_data.quality_audio"
                                               name="quality_audio"
                                               value="viele" required/></label>
                                </div>
                            </div>
                            <div class="col-xs-3">
                                <div class="radio">
                                    <label>{{"feedback.few noises" | translate}}
                                        <input type="radio" [(ngModel)]="feedback_data.quality_audio"
                                               name="quality_audio"
                                               value="wenig" required/></label>
                                </div>
                            </div>
                            <div class="col-xs-3">
                                <div class="radio">
                                    <label>{{"feedback.very few noises" | translate}}
                                        <input type="radio" [(ngModel)]="feedback_data.quality_audio"
                                               name="quality_audio"
                                               value="sehr wenig" required/></label>
                                </div>
                            </div>
                            <div class="col-xs-3">
                                <div class="radio">
                                    <label>{{"feedback.no noises" | translate}}
                                        <input type="radio" [(ngModel)]="feedback_data.quality_audio"
                                               name="quality_audio"
                                               value="keine" required/></label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group"><label class="control-label">{{"transcription-submit.comment description" | translate}}:</label>
                        <textarea class="form-control" id="short-feedback" name="shortfeedback"
                                  [(ngModel)]="feedback_data.comment" required
                                  minlength="3" maxlength="500"></textarea>
                    </div>
                    <div id="form-group">
                        <div class="btn-group btn-group-justified" role="group" aria-label="...">
                            <button type="button" class="form-control" class="btn btn-raised"
                                    style="position:relative;width:49%;"
                                    (click)="back()"><span
                                    class="glyphicon glyphicon-menu-left" aria-hidden="true"></span><span> {{"general.back" | translate}}</span>
                            </button>
                            <button type="submit" class="form-control" class="btn btn-primary btn-raised"
                                    style="position:relative;width:49%;margin-left:2%;" [disabled]="!fo.valid"
                                    name="send">
                                <span>{{"transcription.send" | translate}} </span><span class="glyphicon glyphicon-send"></span></button>
                        </div>
                    </div>
                </fieldset>
            </form>
        </section>
    </div>
    <div *ngIf="sessService.offline">
        <h4>{{"general.export data"| translate}}</h4>
        <div class="row" style="padding:15px;">
            <div class="col-xs-6 export-button">
                <a download="{{transcrService.filename}}.txt" [href]="sanitize(getURI('text'))">
                    <div><span
                            class="glyphicon glyphicon-floppy-save export-glyphicon"></span><br/>{{"general.text file"| translate}}
                    </div>
                </a><br/>
                <a class="export-a"
                   href="https://clarin.phonetik.uni-muenchen.de/BASWebServices/#/services/WebMAUSBasic"
                   target="_blank">{{"general.open"| translate:{value:"WebMAUS"} }}</a>
            </div>
            <div class="col-xs-6 export-button">
                <a download="{{transcrService.filename}}_annot.json" [href]="sanitize(getURI('annotJSON'))">
                    <div><span
                            class="glyphicon glyphicon-floppy-save export-glyphicon"></span><br/>annotJSON
                    </div>
                </a><br/>
                <a class="export-a"
                   href="http://ips-lmu.github.io/EMU-webApp/"
                   target="_blank">{{"general.open"| translate:{value:"EMU-Webapp"} }}</a>
            </div>
        </div>
        <button type="button" class="form-control" class="btn btn-raised"
                style="position:relative;width:100%;margin-top:40px;"
                (click)="back()"><span
                class="glyphicon glyphicon-menu-left" aria-hidden="true"></span><span> {{"general.back" | translate}}</span>
        </button>
    </div>
</div>